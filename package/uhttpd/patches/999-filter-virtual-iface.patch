--- a/uhttpd-utils.c
+++ b/uhttpd-utils.c
@@ -170,6 +170,46 @@ int uh_getifaddr(const char *ifname, struct in_addr *in)
     struct ifreq ifr;
     int s;

+    /* ---- 虚拟接口过滤器，避免 ioctl 报错 ---- */
+    static const char *skip_prefix[] = {
+        "lo",       /* loopback        */
+        "ifb",      /* ifb0 ifb1       */
+        "tun",      /* tun0 tun1       */
+        "tap",      /* tap0 tap1       */
+        "br-",      /* br-lan br-wan   */
+        "docker",   /* docker0         */
+        "veth",     /* vethXXXX        */
+        NULL
+    };
+
+    /* VLAN 子接口 eth1.1 eth0.2 */
+    if (strchr(ifname, '.')) {
+        return -1; /* 跳过虚拟 VLAN 口 */
+    }
+
+    /* 前缀匹配跳过其它虚拟接口 */
+    for (int i = 0; skip_prefix[i]; i++) {
+        size_t len = strlen(skip_prefix[i]);
+        if (!strncmp(ifname, skip_prefix[i], len)) {
+            return -1;
+        }
+    }
+
+    /* ---- 以上代码确保 uhttpd 不会访问不存在的物理接口 ---- */
+
     memset(&ifr, 0, sizeof(ifr));
     strncpy(ifr.ifr_name, ifname, sizeof(ifr.ifr_name));

